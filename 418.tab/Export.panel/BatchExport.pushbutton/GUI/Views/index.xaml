<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="418 : Exportation des jeux"
        MinHeight="710" MinWidth="950"
        Height="710" Width="950"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource WindowBackgroundBrush}">

  <Window.Resources>
    <ResourceDictionary>
      <!-- Convertisseur pour la visibilité -->
      <BooleanToVisibilityConverter x:Key="BoolToVisConverter"/>
    </ResourceDictionary>
  </Window.Resources>

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- En-tête avec bouton burger -->
    <Grid Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,12">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      
      <!-- Bouton burger -->
      <Button Name="BurgerButton" 
              Grid.Column="0"
              Width="40" Height="40"
              Margin="0,0,12,0"
              Background="Transparent"
              BorderThickness="0"
              Cursor="Hand"
              ToolTip="Paramètres et options d'export">
        <TextBlock Text="☰" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
      </Button>
      
      <TextBlock Text="418 : Exportation des jeux"
                 Grid.Column="1"
                 Style="{DynamicResource HeaderTextBlockStyle}"
                 VerticalAlignment="Center"/>
    </Grid>

    <!-- Menu burger (panneau coulissant) -->
    <Border Name="BurgerMenu"
            Grid.Row="0" Grid.RowSpan="4"
            Width="320"
            HorizontalAlignment="Left"
            Background="{DynamicResource CardBackgroundBrush}"
            BorderThickness="0,0,1,0"
            BorderBrush="{DynamicResource ControlBorderBrush}"
            Panel.ZIndex="1000"
            Visibility="Collapsed"
            Margin="-12">
      <Border.Effect>
        <DropShadowEffect ShadowDepth="4" BlurRadius="16" Opacity="0.2"/>
      </Border.Effect>
      
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- En-tête du menu -->
        <Border Grid.Row="0" Background="{DynamicResource MicaBackgroundBrush}" BorderThickness="0,0,0,1" BorderBrush="{DynamicResource ControlBorderBrush}" Padding="16">
          <Grid>
            <TextBlock Text="Paramètres" Style="{DynamicResource SubHeaderTextBlockStyle}" VerticalAlignment="Center"/>
            <Button Name="CloseBurgerButton" 
                    Content="×" 
                    FontSize="24"
                    Width="32" Height="32"
                    HorizontalAlignment="Right"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Foreground="{DynamicResource TextPrimaryBrush}"/>
          </Grid>
        </Border>
        
        <!-- Contenu du menu -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="16">
            <ContentControl x:Name="ParameterSelectorHost"
                            Template="{DynamicResource ParameterSelectorTemplate}"/>
            <ContentControl x:Name="ExportOptionsHost"
                            Margin="0,16,0,0"
                            Template="{DynamicResource ExportOptionsTemplate}"/>
          </StackPanel>
        </ScrollViewer>
      </Grid>
    </Border>

    <!-- Zone de destination -->
    <Border Style="{DynamicResource StyledBorder}"
            Grid.Row="1">
      <ContentControl x:Name="DestinationPickerHost"
                      Template="{DynamicResource DestinationPickerTemplate}"/>
    </Border>

    <!-- Zone de nommage -->
    <Border Style="{DynamicResource StyledBorder}"
            Grid.Row="2">
      <ContentControl x:Name="NamingConfigHost"
                      Template="{DynamicResource NamingConfigTemplate}"/>
    </Border>

    <!-- Zone recapitulatif + progression -->
    <Border Style="{DynamicResource StyledBorder}"
            Grid.Row="3"
            Margin="0,0,0,0">
      <ContentControl x:Name="CollectionPreviewHost"
                      Template="{DynamicResource CollectionPreviewTemplate}"/>
    </Border>

  </Grid>
</Window>
